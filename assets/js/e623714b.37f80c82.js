"use strict";(self.webpackChunkcdp_docs=self.webpackChunkcdp_docs||[]).push([[222],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>b});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=r.createContext({}),p=function(e){var t=r.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(d.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,b=u["".concat(d,".").concat(m)]||u[m]||c[m]||o;return n?r.createElement(b,i(i({ref:t},s),{},{components:n})):r.createElement(b,i({ref:t},s))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},702:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:5,tags:["Draft"]},i="dbt Project Setup",l={unversionedId:"program_overview/practitioner/onboarding/dbt_project_setup",id:"program_overview/practitioner/onboarding/dbt_project_setup",title:"dbt Project Setup",description:"This page is a work in progress",source:"@site/docs/program_overview/practitioner/onboarding/dbt_project_setup.md",sourceDirName:"program_overview/practitioner/onboarding",slug:"/program_overview/practitioner/onboarding/dbt_project_setup",permalink:"/doc/docs/program_overview/practitioner/onboarding/dbt_project_setup",draft:!1,editUrl:"https://github.com/cdp-ucsc/doc/blob/main/cdp-docs/docs/program_overview/practitioner/onboarding/dbt_project_setup.md",tags:[{label:"Draft",permalink:"/doc/docs/tags/draft"}],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,tags:["Draft"]},sidebar:"documentationSidebar",previous:{title:"GitHub Setup",permalink:"/doc/docs/program_overview/practitioner/onboarding/github_setup_instructions"},next:{title:"Training Opportunities",permalink:"/doc/docs/program_overview/practitioner/onboarding/training"}},d={},p=[{value:"dbt Core",id:"dbt-core",level:2},{value:"1. Clone dbt project repo from GitHub",id:"1-clone-dbt-project-repo-from-github",level:3},{value:"2. Setup project virtual environment",id:"2-setup-project-virtual-environment",level:3},{value:"3. Setup <code>profiles.yml</code>",id:"3-setup-profilesyml",level:3},{value:"4. <code>dbt build</code> project",id:"4-dbt-build-project",level:3},{value:"dbt Cloud",id:"dbt-cloud",level:2},{value:"1. Request access to dbt Cloud",id:"1-request-access-to-dbt-cloud",level:3},{value:"2. Login to dbt Cloud",id:"2-login-to-dbt-cloud",level:3}],s={toc:p},u="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"dbt-project-setup"},"dbt Project Setup"),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"This page is a work in progress")),(0,a.kt)("p",null,"dbt is the transformation tool that we use to compile and execute our data models. Developers will need to set up and configure several items to use dbt."),(0,a.kt)("h2",{id:"dbt-core"},"dbt Core"),(0,a.kt)("p",null,"dbt Core is dbt's CLI version. Learn more about dbt Core ",(0,a.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/core/about-the-cli"},"here"),"."),(0,a.kt)("h3",{id:"1-clone-dbt-project-repo-from-github"},"1. Clone dbt project repo from GitHub"),(0,a.kt)("p",null,"Instructions can be found on the ",(0,a.kt)("a",{parentName:"p",href:"github_setup_instructions"},"GitHub Setup Instructions")," page."),(0,a.kt)("h3",{id:"2-setup-project-virtual-environment"},"2. Setup project virtual environment"),(0,a.kt)("p",null,"Instructions can be found on the ",(0,a.kt)("a",{parentName:"p",href:"workstation_setup"},"Workstation Setup")," page. This step also covers dbt installation."),(0,a.kt)("h3",{id:"3-setup-profilesyml"},"3. Setup ",(0,a.kt)("inlineCode",{parentName:"h3"},"profiles.yml")),(0,a.kt)("p",null,"Since dbt compiles and runs SQL in our data warehouse, dbt needs to connect to the warehouse. The ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml")," provides dbt with the necessary information to make the connection."),(0,a.kt)("p",null,"Your ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml")," file should be stored in a directory called ",(0,a.kt)("inlineCode",{parentName:"p"},".dbt")," at your user/home directory level. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd\n$ ls -a\n./ ../ .dbt ...\n")),(0,a.kt)("p",null,"If you do not have the directory, then create the directory."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd \n$ ls -a\n./ ../ ...\n$ mkdir .dbt\n")),(0,a.kt)("p",null,"In ",(0,a.kt)("inlineCode",{parentName:"p"},".dbt")," create the ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml")," file."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd .dbt/\n$ touch profiles.yml\n")),(0,a.kt)("p",null,"The contents of the ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml")," file is specific to each developer's access to Snowflake. Instructions to request access can be found ",(0,a.kt)("a",{parentName:"p",href:"access_overview"},"here"),". If you have been provided your Snowflake profile information, then enter it the ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml"),". It is recommended to open ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml")," via VSCode to enter in your profile information rather than from the command line. "),(0,a.kt)("p",null,"For example, a ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml")," should look similar to"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},"<profile_name>:\n  outputs:\n    dev:\n      account: <account>\n      authenticator: externalbrowser\n      database: <database>\n      role: <role>\n      schema: <schema>\n      threads: 1\n      type: snowflake\n      user: <cruzid>@ucsc.edu\n      warehouse: <warehouse>\n  target: <target>\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Configuration Key"),(0,a.kt)("th",{parentName:"tr",align:null},"Definition"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"my_project"),(0,a.kt)("td",{parentName:"tr",align:null},"This is defining a profile - this specific name should be the profile that is referenced in our dbt_project.yml")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"target: dev"),(0,a.kt)("td",{parentName:"tr",align:null},"This is the default environment that will be used during our runs.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"outputs:"),(0,a.kt)("td",{parentName:"tr",align:null},"This is a prompt to start defining targets and their configurations. You likely won't need more than ",(0,a.kt)("inlineCode",{parentName:"td"},"dev"),", but this and any other targets you define can be used to accomplish certain functionalities throughout dbt.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"dev:"),(0,a.kt)("td",{parentName:"tr",align:null},"This is defining a target named ",(0,a.kt)("inlineCode",{parentName:"td"},"dev"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"type: ","[warehouse_name]"),(0,a.kt)("td",{parentName:"tr",align:null},"This is the type of target connection we are using, based on our warehouse.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"threads: 8"),(0,a.kt)("td",{parentName:"tr",align:null},"This is the amount of concurrent models that can run against our warehouse, for this user, at one time when conducting a ",(0,a.kt)("inlineCode",{parentName:"td"},"dbt run"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"account: ","[abc12345.us-west-1]"),(0,a.kt)("td",{parentName:"tr",align:null},"Change this out to the warehouse's account.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"user: ","[your_username]"),(0,a.kt)("td",{parentName:"tr",align:null},"Change this to use your own username that you use to log in to the warehouse")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"password: ","[your_password]"),(0,a.kt)("td",{parentName:"tr",align:null},"Change this to use your own password for the warehouse")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"role: transformer"),(0,a.kt)("td",{parentName:"tr",align:null},"This is the role that has the correct permissions for working in this project.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"database: analytics"),(0,a.kt)("td",{parentName:"tr",align:null},"This is the database name where our models will build")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"schema: dbt_","[your_name]"),(0,a.kt)("td",{parentName:"tr",align:null},"Change this to a custom name. Follow the convention ",(0,a.kt)("inlineCode",{parentName:"td"},"dbt_[first initial][last_name]"),". This is the schema that models will build into / test from when conducting runs locally.")))),(0,a.kt)("p",null,"Learn more about Snowflake specific ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml")," ",(0,a.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/reference/warehouse-setups/snowflake-setup"},"here"),"."),(0,a.kt)("h3",{id:"4-dbt-build-project"},"4. ",(0,a.kt)("inlineCode",{parentName:"h3"},"dbt build")," project"),(0,a.kt)("p",null,"At this point you should be able to ",(0,a.kt)("inlineCode",{parentName:"p"},"build")," the dbt project. "),(0,a.kt)("p",null,"In VSCode, open the project directory. From the terminal command line, activate the project's virtual environment. Enter the following in the command line. Note: since dbt is connecting to Snowflake, the campus VPN must be active."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"(project_name)\n$ dbt build\n")),(0,a.kt)("p",null,"This will build all the models in the Snowflake database and schema specified in your ",(0,a.kt)("inlineCode",{parentName:"p"},"profiles.yml"),"."),(0,a.kt)("h2",{id:"dbt-cloud"},"dbt Cloud"),(0,a.kt)("p",null,"dbt Cloud is a dbt managed service that is web based. Learn more about dbt Cloud ",(0,a.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/cloud/about-cloud-setup"},"here"),"."),(0,a.kt)("h3",{id:"1-request-access-to-dbt-cloud"},"1. Request access to dbt Cloud"),(0,a.kt)("p",null,"Instructions can be found on the ",(0,a.kt)("a",{parentName:"p",href:"account_request_form"},"Request Access")," page."),(0,a.kt)("h3",{id:"2-login-to-dbt-cloud"},"2. Login to dbt Cloud"),(0,a.kt)("p",null,"Activate the campus VPN and use UC Santa Cruz's dbt Cloud login ",(0,a.kt)("a",{parentName:"p",href:"https://cloud.getdbt.com/enterprise-login/ucsc"},"link"),"."))}c.isMDXComponent=!0}}]);